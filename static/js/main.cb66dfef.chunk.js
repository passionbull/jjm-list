(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(t,e,n){t.exports=n(212)},212:function(t,e,n){var o=n(84),a=n(44),i=a(n(1)),l=a(n(27));n(216);var r=a(n(218)),c=o(n(465));l.default.render(i.default.createElement(r.default,null),document.getElementById("root")),c.unregister()},216:function(t,e,n){},218:function(t,e,n){(function(t){var o=n(84),a=n(44);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n(67)),l=a(n(113)),r=a(n(221)),c=a(n(85)),s=a(n(114)),d=a(n(115)),u=a(n(117)),f=a(n(118)),g=a(n(116)),h=o(n(1)),v=n(193),p=a(n(252)),m=a(n(272)),y=a(n(273)),b=a(n(461)),w=new y.default,k=function(t){function e(){var t,n;(0,c.default)(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(n=(0,d.default)(this,(t=(0,u.default)(e)).call.apply(t,[this].concat(a)))).state={holders:[],symbol:"",maintainer:["virus707","goldenticket","jjm13"],sum_balance:"",holderCnt:0,holderAll:0,updated:!0,watingListUpdate:!1,getPostingFromDate:7,modalVisible:!1,sign_in:!1},n.getWatingList=function(){n.setState({holderCnt:0,updated:!1});var t=0,e=new Date;e.setDate(e.getDate()-n.state.getPostingFromDate);var o=e.toISOString().split(".")[0],a=e.toLocaleString(),i=n.state.holders_data;n.setState({holderAll:i.length,show_dt:a});var l=!0,r=!1,c=void 0;try{for(var s,d=i["function"===typeof Symbol&&"function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(l=(s=d.next()).done);l=!0){var u=s.value;n.getPostingByBlog(u.account,"","",(0,g.default)((0,g.default)(n)),t,i,o,0),t+=1}}catch(f){r=!0,c=f}finally{try{l||null==d.return||d.return()}finally{if(r)throw c}}},n.filtering=function(){var t=n.state.holders_data;n.setState({updated:!1,holders_data:[]},function(){window.alert("updated!"),t=(t=(t=t.filter(function(t){return!0!==t.voted})).filter(function(t){return""!==t.latest_posting_jjm})).filter(function(t){return"0 JJM"!==t.balance}),console.log(t),n.setState({updated:!0,holders_data:t,watingListUpdate:!0})})},n.actionVoting=function(){var t=n.state.holders_data;n.setState({updated:!1,watingListUpdate:!1},function(){n.votedReculsive(t,0,t.length,(0,g.default)((0,g.default)(n)))})},n.sscLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"JJM",e=new p.default("https://api.steem-engine.com/rpc/");e.stream(function(t,e){}),e.find("market","metrics",{symbol:t},1e3,0,[],function(t,e){n.setState({lastPrice:e[0].lastPrice,volume:e[0].volume,highestBid:e[0].highestBid,lowestAsk:e[0].lowestAsk})}),e.find("tokens","balances",{symbol:t},1e3,0,[],function(e,o){var a=[],i=[];o.sort(function(t,e){return e.balance-t.balance});var l=!0,r=!1,c=void 0;try{for(var s,d=o["function"===typeof Symbol&&"function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(l=(s=d.next()).done);l=!0){var u=s.value;a.push(u)}}catch(e){r=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(r)throw c}}for(var f=0,g=a,h=0;h<g.length;h++){f+=1*g[h].balance}var v=!0,p=!1,m=void 0;try{for(var y,b=n.state.maintainer["function"===typeof Symbol&&"function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(v=(y=b.next()).done);v=!0){var w=y.value,k=n.findAccount(a,w);void 0!==k&&(f-=k.balance)}}catch(e){p=!0,m=e}finally{try{v||null==b.return||b.return()}finally{if(p)throw m}}n.setState({sum_balance:f});for(var S=0,x=a,_=0;_<x.length;_++){var E=x[_];S+=1,E.rate=E.balance/f;var T=!0,L=!1,B=void 0;try{for(var W,j=n.state.maintainer["function"===typeof Symbol&&"function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(T=(W=j.next()).done);T=!0){var P=W.value;E.account===P&&(E.rate=0)}}catch(e){L=!0,B=e}finally{try{T||null==j.return||j.return()}finally{if(L)throw B}}var A=1;E.balance/1e3>45?A+=45:A+=Math.floor(E.balance/1e3),i.push({account:E.account,balance:1*E.balance+" "+t,rate:1*E.rate,hid:S,voting_rate:A})}n.setState({holders:a,holders_data:i,sum_balance:f},function(){})})},n.findAccount=function(t,e){return t.find(function(t){return t.account===e})},n.loginSteemConnect2=function(){!1===n.state.sign_in?n.getLoginURL():n.revokeToken()},n.getLoginURL=function(){var t=b.default.getLoginURL();window.location.href=t},n.revokeToken=function(){b.default.revokeToken(function(t,e){console.log(e),v.AsyncStorage.removeItem("token")}),n.setState({sign_in:!1})},n.checkToken=function(t){if(t.indexOf("?access_token")>-1)try{var e={},n=t.split("?")[1];(n=n.split("&")).forEach(function(t){var n=t.split("="),o=(0,r.default)(n,2),a=o[0],i=o[1];e[a]=i}),console.log("tokens:",e),v.AsyncStorage.setItem("token",e.access_token)}catch(o){console.log(o)}},n.getAsyncToken=(0,l.default)(i.default.mark(function t(){var e;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.AsyncStorage.getItem("token");case 3:return e=t.sent,t.next=6,e;case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t.catch(0),console.warn(t.t0),t.abrupt("return",null);case 13:case"end":return t.stop()}},t,null,[[0,9]])})),n}return(0,f.default)(e,t),(0,s.default)(e,[{key:"updatedCallback",value:function(t){var e=this,n=this.state.holderCnt;n+=1,this.setState({holderCnt:n}),n===this.state.holderAll&&(console.log(t),this.setState({holders_data:t,updated:!0},function(){e.filtering()}))}},{key:"votedReculsive",value:function(t,e,n,o){b.default.vote(o.state.steem_account,t[e].account,t[e].latest_posting_jjm,100*t[e].voting_rate,function(a,i){if(console.log("index",e,t[e].account),console.log(a,i),(e+=1)===n)return o.setState({updated:!0}),void window.alert("updated!");o.votedReculsive(t,e,n,o)})}},{key:"render",value:function(){return h.default.createElement(v.View,{style:{flex:1}},h.default.createElement(v.View,{style:{flex:1,flexDirection:"row",width:500,paddingLeft:20,paddingTop:20}},!0===this.state.updated?h.default.createElement(v.View,null):h.default.createElement(v.ActivityIndicator,{size:"large",color:"#0000ff"}),h.default.createElement(v.View,{style:{flex:1,paddingRight:10}},h.default.createElement(v.Button,{style:{},title:"Waiting list",disabled:!0!==this.state.updated,onPress:this.getWatingList})),h.default.createElement(v.View,{style:{flex:1,paddingRight:10}},h.default.createElement(v.Button,{style:{},title:"Voting",disabled:!0!==this.state.watingListUpdate,onPress:this.actionVoting})),h.default.createElement(v.View,{style:{flex:1}},h.default.createElement(v.Button,{style:{},title:!1===this.state.sign_in?"Sign in with SteemConnect":"Sign out",onPress:this.loginSteemConnect2}))),h.default.createElement(v.Text,{style:{color:"black",fontWeight:"bold",fontSize:20,paddingLeft:20,paddingTop:20,paddingBottom:3}},"Token Info"),h.default.createElement(v.Text,{style:{color:"black",fontSize:15,paddingLeft:20,paddingBottom:5}},"Last: ",this.state.lastPrice," STEEM, 24h Vol: ",this.state.volume," STEEM, Bid: ",this.state.highestBid," STEEM, Ask: ",this.state.lowestAsk," STEEM"),h.default.createElement(v.Text,{style:{color:"black",fontWeight:"bold",fontSize:16,paddingLeft:20,paddingBottom:3}},"\ucd1d \ud640\ub354 \uc218 : ",this.state.holders.length),h.default.createElement(v.Text,{style:{color:"black",fontWeight:"bold",fontSize:16,paddingLeft:20}},"\uc720\ud1b5\ubb3c\ub7c9 : ",(1*this.state.sum_balance).toFixed(2)," JJM"),h.default.createElement(v.View,{style:{flex:1,flexDirection:"row",paddingTop:30,paddingLeft:20}},h.default.createElement(v.Text,{style:{flex:1,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Account"),h.default.createElement(v.Text,{style:{flex:1,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Balance"),h.default.createElement(v.Text,{style:{flex:.5,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Stake"),h.default.createElement(v.Text,{style:{flex:.5,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Voting Percent"),h.default.createElement(v.Text,{style:{flex:.5,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Voted after ",this.state.show_dt),h.default.createElement(v.Text,{style:{flex:1,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Latest link")),h.default.createElement(v.View,{style:{flex:1,paddingLeft:20}},h.default.createElement(v.FlatList,{data:this.state.holders_data,extraData:this.state.updated,renderItem:function(t){var e=t.item;return h.default.createElement(m.default,{id:e.id,account:e.account,balance:e.balance,voting_rate:e.voting_rate,rate:e.rate,holderID:e.hid,voted:e.voted,latestLink:"https://busy.org/@"+e.account+"/"+e.latest_posting_jjm})}})))}},{key:"componentDidMount",value:function(){var t=this;this.setState({symbol:"JJM"}),this.sscLoad("JJM");var e=window.location.href;this.checkToken(e),this.getAsyncToken().then(function(e){null===e?t.setState({sign_in:!1}):(b.default.setAccessToken(e),b.default.me().then(function(e){var n=e.account;JSON.parse(n.json_metadata).profile;console.log("profile",n),t.setState({sign_in:!0,steem_account:n.name})}).catch(function(t){}))})}},{key:"getPostingByBlog",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,r=arguments.length>7?arguments[7]:void 0,c={tag:t,limit:50,start_author:e,start_permlink:n};w.getDiscussionsByBlog(c).then(function(e){var n=e.length,s=!1,d="",u=!0,f=!1,g=void 0;try{for(var h,v=e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(u=(h=v.next()).done);u=!0){var p=h.value;p.author===c.tag&&p.created>l&&(!1===s&&(s=p.active_votes.find(function(t){return"virus707"===t.voter||"jacobyu"===t.voter})),0===r&&(d=p.permlink),void 0!==s?s=!0:void 0===s&&(s=!1),r+=1)}}catch(b){f=!0,g=b}finally{try{u||null==v.return||v.return()}finally{if(f)throw g}}if(n<50||e[n-1].created<l)i[a].account===t?(i[a].voted=s,i[a].latest_posting_jjm=d,o.updatedCallback(i)):console.log("something is wrong.");else{var m=e[n-1].author,y=e[n-1].permlink;o.getPostingByBlog(t,m,y,o,a,i,l,r)}})}}]),e}(h.Component),S=function(){return function(){return k}};"web"===v.Platform.OS&&(S=n(463).hot);var x=S(t)(k);e.default=x}).call(this,n(66)(t))},272:function(t,e,n){var o=n(84),a=n(44);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n(85)),l=a(n(114)),r=a(n(115)),c=a(n(117)),s=a(n(118)),d=o(n(1)),u=n(193),f=function(t){function e(){var t,n;(0,i.default)(this,e);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return(n=(0,r.default)(this,(t=(0,c.default)(e)).call.apply(t,[this].concat(a))))._onPress=function(){},n}return(0,s.default)(e,t),(0,l.default)(e,[{key:"render",value:function(){return d.default.createElement(u.View,{style:{flex:1,flexDirection:"row",paddingTop:5}},d.default.createElement(u.View,{style:{flex:1,borderWidth:.1}},d.default.createElement(u.Text,{style:{flex:1,color:"black",fontSize:15,padding:3}},this.props.holderID+"-"+this.props.account)),d.default.createElement(u.View,{style:{flex:1,borderWidth:.1}},d.default.createElement(u.Text,{style:{flex:1,color:"black",fontSize:15,padding:3}},this.props.balance)),d.default.createElement(u.View,{style:{flex:.5,borderWidth:.1}},d.default.createElement(u.Text,{style:{flex:1,color:"black",fontSize:15,padding:3,paddingLeft:10}},(100*this.props.rate).toFixed(3),"%")),d.default.createElement(u.View,{style:{flex:.5,borderWidth:.1}},d.default.createElement(u.Text,{style:{flex:1,color:"black",fontSize:15,padding:3,paddingLeft:10}},this.props.voting_rate,"%")),d.default.createElement(u.View,{style:{flex:.5,borderWidth:.1}},d.default.createElement(u.Text,{style:{flex:1,color:"black",fontSize:15,padding:3,paddingLeft:10}},void 0===this.props.voted?"":""+this.props.voted)),d.default.createElement(u.View,{style:{flex:1,borderWidth:.1}},d.default.createElement(u.Text,{style:{flex:1,color:"black",fontSize:15,padding:3,paddingLeft:10}},void 0===this.props.voted?"":this.props.latestLink)))}}]),e}(d.default.PureComponent);e.default=f},273:function(t,e,n){var o=n(44);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(67)),i=o(n(113)),l=o(n(85)),r=o(n(274)),c=new(n(460).Client)("https://api.steemit.com");e.default=function t(){var e=this;(0,l.default)(this,t),this.getVotingInfo=function(){var t=(0,i.default)(a.default.mark(function t(e){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.database.call("get_active_votes",[e.author,e.permlink]).then(function(t){void 0===t.find(function(t){return"virus707"===t.voter})?(console.log("Wait!!! voting ->"+e.author),e.voted=!1):(console.log("Got!!! voting ->"+e.author),e.voted=!0)});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),this.getPosting=function(){var t=(0,i.default)(a.default.mark(function t(n,o){var i,l,r,c,s,d=arguments;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=d.length>2&&void 0!==d[2]?d[2]:"",l=d.length>3&&void 0!==d[3]?d[3]:"",r={tag:"jjm",limit:n+=1,start_permlink:i,start_author:l},c={this:o},t.prev=5,t.next=8,e.getDiscussionsByCreated(r);case 8:s=t.sent,c.posts=s.slice(0,n-1),c.last_permlink=s[n-1].permlink,c.last_author=s[n-1].author,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),console.log("err",t.t0);case 17:return t.next=19,c;case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}},t,null,[[5,14]])}));return function(e,n){return t.apply(this,arguments)}}(),this.getDiscussionsByCreated=function(t){return new Promise(function(e,n){r.default.api.getDiscussionsByCreated(t,function(t,o){t&&n(t),e(o)})})},this.getDiscussionsByBlog=function(t){return new Promise(function(e,n){r.default.api.getDiscussionsByBlog(t,function(t,o){t&&n(t),e(o)})})}}},315:function(t,e){},321:function(t,e){},323:function(t,e){},337:function(t,e){},372:function(t,e){},373:function(t,e){},461:function(t,e,n){var o=n(44);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(462)).default.Initialize({app:"wp-steem-share",callbackURL:"http://localhost:3000",accessToken:"access_token",scope:["vote","comment"]});e.default=a},465:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(t){if("serviceWorker"in navigator){var e=new URL("/jjm-list",window.location.href);if(e.origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/jjm-list","/service-worker.js");n?(!function(t,e){fetch(t).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):o(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):o(e,t)})}},e.unregister=function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})};var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}}},[[211,2,1]]]);
//# sourceMappingURL=main.cb66dfef.chunk.js.map