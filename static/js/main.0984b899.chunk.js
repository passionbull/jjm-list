(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(t,e,n){t.exports=n(212)},212:function(t,e,n){var o=n(84),a=n(44),i=a(n(1)),r=a(n(27));n(216);var l=a(n(218)),s=o(n(465));r.default.render(i.default.createElement(l.default,null),document.getElementById("root")),s.unregister()},216:function(t,e,n){},218:function(t,e,n){(function(t){var o=n(84),a=n(44);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n(67)),r=a(n(113)),l=a(n(221)),s=a(n(85)),c=a(n(114)),u=a(n(115)),d=a(n(117)),f=a(n(118)),g=a(n(116)),h=o(n(1)),v=n(193),p=a(n(252)),m=a(n(272)),y=a(n(273)),b=a(n(461)),w=new y.default,k=function(t){function e(){var t,n;(0,s.default)(this,e);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(n=(0,u.default)(this,(t=(0,d.default)(e)).call.apply(t,[this].concat(a)))).state={holders:[],symbol:"",maintainer:["virus707","goldenticket","jjm13"],sum_balance:"",holderCnt:0,holderAll:0,updated:!0,watingListUpdate:!1,getPostingFromDate:7,modalVisible:!1,sign_in:!1},n.getWatingList=function(){n.setState({holderCnt:0,updated:!1});var t=0,e=new Date;e.setDate(e.getDate()-n.state.getPostingFromDate);var o=e.toISOString().split(".")[0],a=e.toLocaleString(),i=new Date;i.setDate(i.getDate()-1);var r=i.toLocaleString();i=i.toISOString().split(".")[0];var l=n.state.holders_data;n.setState({holderAll:l.length,show_posting_time:a,show_voter_time:r});var s=!0,c=!1,u=void 0;try{for(var d,f=l["function"===typeof Symbol&&"function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(s=(d=f.next()).done);s=!0){var h=d.value;n.getPostingByBlog(h.account,"","",(0,g.default)((0,g.default)(n)),t,l,o,i,0),t+=1}}catch(v){c=!0,u=v}finally{try{s||null==f.return||f.return()}finally{if(c)throw u}}},n.filtering=function(){var t=n.state.holders_data;n.setState({updated:!1,holders_data:[]},function(){window.alert("updated!"),t=(t=(t=t.filter(function(t){return!0!==t.voted})).filter(function(t){return""!==t.latest_posting_jjm})).filter(function(t){return t.balance>=100}),console.log(t),n.setState({updated:!0,holders_data:t,watingListUpdate:!0})})},n.actionVoting=function(){var t=n.state.holders_data;n.setState({updated:!1,watingListUpdate:!1},function(){n.votedReculsive(t,0,t.length,(0,g.default)((0,g.default)(n)))})},n.sscLoad=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"JJM",e=new p.default("https://api.steem-engine.com/rpc/");e.stream(function(t,e){}),e.find("market","metrics",{symbol:t},1e3,0,[],function(t,e){n.setState({lastPrice:e[0].lastPrice,volume:e[0].volume,highestBid:e[0].highestBid,lowestAsk:e[0].lowestAsk})}),e.find("tokens","balances",{symbol:t},1e3,0,[],function(t,e){var o=[],a=[];e.sort(function(t,e){return e.balance-t.balance});var i=!0,r=!1,l=void 0;try{for(var s,c=e["function"===typeof Symbol&&"function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(i=(s=c.next()).done);i=!0){var u=s.value;o.push(u)}}catch(t){r=!0,l=t}finally{try{i||null==c.return||c.return()}finally{if(r)throw l}}for(var d=0,f=o,g=0;g<f.length;g++){d+=1*f[g].balance}var h=!0,v=!1,p=void 0;try{for(var m,y=n.state.maintainer["function"===typeof Symbol&&"function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(h=(m=y.next()).done);h=!0){var b=m.value,w=n.findAccount(o,b);void 0!==w&&(d-=w.balance)}}catch(t){v=!0,p=t}finally{try{h||null==y.return||y.return()}finally{if(v)throw p}}n.setState({sum_balance:d}),o=o.filter(function(t){return 1*t.balance>0});var k=0,S=!0,x=!1,_=void 0;try{for(var E,T=o["function"===typeof Symbol&&"function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(S=(E=T.next()).done);S=!0){var L=E.value;k+=1,L.rate=L.balance/d;var B=!0,W=!1,j=void 0;try{for(var P,A=n.state.maintainer["function"===typeof Symbol&&"function"===typeof Symbol&&"function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(B=(P=A.next()).done);B=!0){var V=P.value;L.account===V&&(L.rate=0)}}catch(t){W=!0,j=t}finally{try{B||null==A.return||A.return()}finally{if(W)throw j}}var D=1;L.balance/1e3>45?D+=45:D+=Math.floor(L.balance/1e3),a.push({account:L.account,balance:L.balance,rate:1*L.rate,hid:k,voting_rate:D})}}catch(t){x=!0,_=t}finally{try{S||null==T.return||T.return()}finally{if(x)throw _}}n.setState({holders:o,holders_data:a,sum_balance:d},function(){})})},n.findAccount=function(t,e){return t.find(function(t){return t.account===e})},n.loginSteemConnect2=function(){!1===n.state.sign_in?n.getLoginURL():n.revokeToken()},n.getLoginURL=function(){var t=b.default.getLoginURL();window.location.href=t},n.revokeToken=function(){b.default.revokeToken(function(t,e){console.log(e),v.AsyncStorage.removeItem("token")}),n.setState({sign_in:!1})},n.checkToken=function(t){if(t.indexOf("?access_token")>-1)try{var e={},n=t.split("?")[1];(n=n.split("&")).forEach(function(t){var n=t.split("="),o=(0,l.default)(n,2),a=o[0],i=o[1];e[a]=i}),console.log("tokens:",e),v.AsyncStorage.setItem("token",e.access_token)}catch(o){console.log(o)}},n.getAsyncToken=(0,r.default)(i.default.mark(function t(){var e;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.AsyncStorage.getItem("token");case 3:return e=t.sent,t.next=6,e;case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t.catch(0),console.warn(t.t0),t.abrupt("return",null);case 13:case"end":return t.stop()}},t,null,[[0,9]])})),n}return(0,f.default)(e,t),(0,c.default)(e,[{key:"updatedCallback",value:function(t){var e=this,n=this.state.holderCnt;n+=1,this.setState({holderCnt:n}),n===this.state.holderAll&&(console.log(t),this.setState({holders_data:t,updated:!0},function(){e.filtering()}))}},{key:"votedReculsive",value:function(t,e,n,o){b.default.vote(o.state.steem_account,t[e].account,t[e].latest_posting_jjm,100*t[e].voting_rate,function(a,i){if(console.log("index",e,t[e].account),console.log(a,i),(e+=1)===n)return o.setState({updated:!0}),void window.alert("updated!");o.votedReculsive(t,e,n,o)})}},{key:"render",value:function(){var t=this;return h.default.createElement(v.View,{style:{flex:1}},h.default.createElement(v.View,{style:{flex:1,flexDirection:"row",width:500,paddingLeft:20,paddingTop:20}},!0===this.state.updated?h.default.createElement(v.View,null):h.default.createElement(v.ActivityIndicator,{size:"large",color:"#0000ff"}),h.default.createElement(v.View,{style:{flex:1,paddingRight:10}},h.default.createElement(v.Button,{style:{},title:"Waiting list",disabled:!0!==this.state.updated,onPress:this.getWatingList})),h.default.createElement(v.View,{style:{flex:1,paddingRight:10}},h.default.createElement(v.Button,{style:{},title:"Voting",disabled:!0!==this.state.watingListUpdate,onPress:this.actionVoting})),h.default.createElement(v.View,{style:{flex:1}},h.default.createElement(v.Button,{style:{},title:!1===this.state.sign_in?"Sign in with SteemConnect":"Sign out",onPress:this.loginSteemConnect2}))),h.default.createElement(v.Text,{style:{color:"black",fontWeight:"bold",fontSize:20,paddingLeft:20,paddingTop:20,paddingBottom:3}},"Token Info"),h.default.createElement(v.Text,{style:{color:"black",fontSize:15,paddingLeft:20,paddingBottom:5}},"Last: ",this.state.lastPrice," STEEM, 24h Vol: ",this.state.volume," STEEM, Bid: ",this.state.highestBid," STEEM, Ask: ",this.state.lowestAsk," STEEM"),h.default.createElement(v.Text,{style:{color:"black",fontWeight:"bold",fontSize:16,paddingLeft:20,paddingBottom:3}},"\ucd1d \ud640\ub354 \uc218 : ",this.state.holders.length),h.default.createElement(v.Text,{style:{color:"black",fontWeight:"bold",fontSize:16,paddingLeft:20}},"\uc720\ud1b5\ubb3c\ub7c9 : ",(1*this.state.sum_balance).toFixed(2)," JJM"),h.default.createElement(v.View,{style:{flex:1,flexDirection:"row",paddingTop:30,paddingLeft:20}},h.default.createElement(v.Text,{style:{flex:1,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Account"),h.default.createElement(v.Text,{style:{flex:1,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Balance"),h.default.createElement(v.Text,{style:{flex:.5,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Stake"),h.default.createElement(v.Text,{style:{flex:.5,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Voting Percent"),h.default.createElement(v.Text,{style:{flex:.5,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Voted after ",this.state.show_voter_time),h.default.createElement(v.Text,{style:{flex:1,color:"black",fontWeight:"bold",fontSize:20,padding:3}},"Latest link after ",this.state.show_posting_time)),h.default.createElement(v.View,{style:{flex:1,paddingLeft:20}},h.default.createElement(v.FlatList,{data:this.state.holders_data,extraData:this.state.updated,renderItem:function(e){var n=e.item;return h.default.createElement(m.default,{id:n.id,account:n.account,balance:(1*n.balance).toFixed(2)+" "+t.state.symbol,voting_rate:n.voting_rate,rate:n.rate,holderID:n.hid,voted:n.voted,latestLink:"https://busy.org/@"+n.account+"/"+n.latest_posting_jjm})}})))}},{key:"componentDidMount",value:function(){var t=this;this.setState({symbol:"JJM"}),this.sscLoad("JJM");var e=window.location.href;this.checkToken(e),this.getAsyncToken().then(function(e){null===e?t.setState({sign_in:!1}):(b.default.setAccessToken(e),b.default.me().then(function(e){var n=e.account;JSON.parse(n.json_metadata).profile;console.log("profile",n),t.setState({sign_in:!0,steem_account:n.name})}).catch(function(t){}))})}},{key:"getPostingByBlog",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,s=arguments.length>8?arguments[8]:void 0,c={tag:t,limit:50,start_author:e,start_permlink:n};w.getDiscussionsByBlog(c).then(function(e){var n=e.length,u=!1,d="",f=!0,g=!1,h=void 0;try{for(var v,p=e["function"===typeof Symbol?Symbol.iterator:"@@iterator"]();!(f=(v=p.next()).done);f=!0){var m=v.value;m.author===c.tag&&m.created>l&&(!1===u&&(u=m.active_votes.find(function(t){return"virus707"===t.voter})),0===s&&(d=m.permlink),void 0!==u?u=!0:void 0===u&&(u=!1),s+=1)}}catch(w){g=!0,h=w}finally{try{f||null==p.return||p.return()}finally{if(g)throw h}}if(n<50||e[n-1].created<r)i[a].account===t?(i[a].voted=u,i[a].latest_posting_jjm=d,o.updatedCallback(i)):console.log("something is wrong.");else{var y=e[n-1].author,b=e[n-1].permlink;o.getPostingByBlog(t,y,b,o,a,i,r,l,s)}})}}]),e}(h.Component),S=function(){return function(){return k}};"web"===v.Platform.OS&&(S=n(463).hot);var x=S(t)(k);e.default=x}).call(this,n(66)(t))},272:function(t,e,n){var o=n(84),a=n(44);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n(85)),r=a(n(114)),l=a(n(115)),s=a(n(117)),c=a(n(118)),u=o(n(1)),d=n(193),f=function(t){function e(){var t,n;(0,i.default)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=(0,l.default)(this,(t=(0,s.default)(e)).call.apply(t,[this].concat(a))))._onPress=function(){},n}return(0,c.default)(e,t),(0,r.default)(e,[{key:"render",value:function(){return u.default.createElement(d.View,{style:{flex:1,flexDirection:"row",paddingTop:5}},u.default.createElement(d.View,{style:{flex:1,borderWidth:.1}},u.default.createElement(d.Text,{style:{flex:1,color:"black",fontSize:15,padding:3}},this.props.holderID+"-"+this.props.account)),u.default.createElement(d.View,{style:{flex:1,borderWidth:.1}},u.default.createElement(d.Text,{style:{flex:1,color:"black",fontSize:15,padding:3}},this.props.balance)),u.default.createElement(d.View,{style:{flex:.5,borderWidth:.1}},u.default.createElement(d.Text,{style:{flex:1,color:"black",fontSize:15,padding:3,paddingLeft:10}},(100*this.props.rate).toFixed(3),"%")),u.default.createElement(d.View,{style:{flex:.5,borderWidth:.1}},u.default.createElement(d.Text,{style:{flex:1,color:"black",fontSize:15,padding:3,paddingLeft:10}},this.props.voting_rate,"%")),u.default.createElement(d.View,{style:{flex:.5,borderWidth:.1}},u.default.createElement(d.Text,{style:{flex:1,color:"black",fontSize:15,padding:3,paddingLeft:10}},void 0===this.props.voted?"":""+this.props.voted)),u.default.createElement(d.View,{style:{flex:1,borderWidth:.1}},u.default.createElement(d.Text,{style:{flex:1,color:"black",fontSize:15,padding:3,paddingLeft:10}},void 0===this.props.voted?"":this.props.latestLink)))}}]),e}(u.default.PureComponent);e.default=f},273:function(t,e,n){var o=n(44);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(67)),i=o(n(113)),r=o(n(85)),l=o(n(274)),s=new(n(460).Client)("https://api.steemit.com");e.default=function t(){var e=this;(0,r.default)(this,t),this.getVotingInfo=function(){var t=(0,i.default)(a.default.mark(function t(e){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.database.call("get_active_votes",[e.author,e.permlink]).then(function(t){void 0===t.find(function(t){return"virus707"===t.voter})?(console.log("Wait!!! voting ->"+e.author),e.voted=!1):(console.log("Got!!! voting ->"+e.author),e.voted=!0)});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),this.getPosting=function(){var t=(0,i.default)(a.default.mark(function t(n,o){var i,r,l,s,c,u=arguments;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:"",r=u.length>3&&void 0!==u[3]?u[3]:"",l={tag:"jjm",limit:n+=1,start_permlink:i,start_author:r},s={this:o},t.prev=5,t.next=8,e.getDiscussionsByCreated(l);case 8:c=t.sent,s.posts=c.slice(0,n-1),s.last_permlink=c[n-1].permlink,s.last_author=c[n-1].author,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),console.log("err",t.t0);case 17:return t.next=19,s;case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}},t,null,[[5,14]])}));return function(e,n){return t.apply(this,arguments)}}(),this.getDiscussionsByCreated=function(t){return new Promise(function(e,n){l.default.api.getDiscussionsByCreated(t,function(t,o){t&&n(t),e(o)})})},this.getDiscussionsByBlog=function(t){return new Promise(function(e,n){l.default.api.getDiscussionsByBlog(t,function(t,o){t&&n(t),e(o)})})}}},315:function(t,e){},321:function(t,e){},323:function(t,e){},337:function(t,e){},372:function(t,e){},373:function(t,e){},461:function(t,e,n){var o=n(44);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(462)).default.Initialize({app:"wp-steem-share",callbackURL:"https://passionbull.github.io/jjm-list",accessToken:"access_token",scope:["vote","comment"]});e.default=a},465:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.register=function(t){if("serviceWorker"in navigator){var e=new URL("/jjm-list",window.location.href);if(e.origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/jjm-list","/service-worker.js");n?(!function(t,e){fetch(t).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):o(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):o(e,t)})}},e.unregister=function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})};var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}}},[[211,2,1]]]);
//# sourceMappingURL=main.0984b899.chunk.js.map